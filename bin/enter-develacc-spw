#!/usr/bin/perl
# Based on /usr/local/bin/enter-develacc
my $pid=`machinectl show 'develacc' -p Leader | cut -d= -f2`;
chomp $pid;
my $home=`echo ~spw`;
chomp $home;
my $uid=`stat --printf="%u" $home`;
chomp $uid;
my $gid=`stat --printf="%g" $home`;
chomp $gid;
if (length $pid) {
	foreach my $var (keys %ENV) {
		delete $ENV{$var} unless $var eq 'PATH' || $var eq 'TERM';
	}
	exec('nsenter', '-S', $uid, '-G', $gid, '-p', '-u', '-n', '-i', '-m', '-t', $pid, @ARGV);
} else {
	die 'container not running';
}
exit(1);
