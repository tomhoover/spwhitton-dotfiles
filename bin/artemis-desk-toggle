#!/bin/sh

EXT="VGA-1"
INT="LVDS-1"
EXTW="1680"
EXTH="1050"
INTW="1280"
INTH="800"
EXTL="us"
INTL="gb"

if xrandr -q | grep "$EXT connected"; then
    # desk mode
    xrandr --output $INT --off
    xrandr --output $EXT --off
    xrandr --output $EXT --primary --mode $EXTW"x"$EXTH \
           --output $INT --noprimary --mode $INTW"x"$INTH --pos 1680x250
    setxkbmap -layout $EXTL -option ctrl:nocaps
    numlockx on
else
    # laptop mode
    xrandr --output $INT --off
    xrandr --output $EXT --off
    xrandr --output $INT --mode $INTW"x"$INTH
    setxkbmap -layout $INTL -option ctrl:nocaps
    numlockx off
    echo 13 | sudo tee /sys/class/backlight/acpi_video0/brightness
fi

xmodmap ~/.Xmodmap
xfce4-panel --restart
xset b off
