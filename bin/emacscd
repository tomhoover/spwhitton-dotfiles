#!/bin/sh

# Launch emacsclient and maybe emacs --daemon if appropriate.  Uses
# emacsclient arguments that work well with my xmonad setup
# (specifically, frames-only-mode.el).  Name from the venerable
# urxvtcd script

emacsclient -c -n -e '(switch-to-buffer nil)'

# Check exit status instead of a pgrep because preventing pgrep from
# matching this emacscd script is a pain (can do it with -f "emacs
# --daemon")

if [ "$?" = "1" ]; then
    emacs --daemon
    emacsclient -c -n -e '(switch-to-buffer nil)'
fi
