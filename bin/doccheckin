#!/bin/bash

set -e

save-org-buffers

cd ~/doc/

# don't do anything if waiting on a manual merge; don't want just
# blanket commit that merge
gstatus=$(git status)
if [[ $gstatus =~ 'You have unmerged paths.' ]]; then
    exit 0
fi

# this command should never fail and stop mr
git add org/{philos/,/}*.org papers/*.{org,md,bib} dissert/*.md daily/*.md pres/*.md playlists/*.m3u emacs-abbrevs emacs-bookmarks mutt-aliases mutt-groups || true

# this command should never fail and stop mr
git commit -a -m "auto commit on $(hostname -s)" || true
