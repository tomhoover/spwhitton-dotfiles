#!/bin/sh

. $HOME/.shenv

# ---- screen locking

# spw means logged into develacc session, which does not have access
# to the logind session, so cannot start a screen locker.  Instead,
# /usr/local/bin/develacc-xsession starts the locker

[ "$USER" = "spw" ] || i3-startup-i3lock

# ---- GTK

gnome-settings-daemon &

# ---- brightness keys

xfce4-power-manager &

# ---- input methods

if ! [ "$USER" = "spw" ];
   # work around Debian bug #812826
   pkill -u $USER ibus-daemon
   IBUS_ENABLE_SYNC_MODE=0 ibus-daemon --xim --daemonize
fi

# ---- startup applications

redshift-gtk &                  # co-ords from config file
[ "$USER" = "spw" ] || nm-applet &
caffeine-indicator &

emacs --daemon &
[ "$USER" = "spw" ] || evolution &
if ! [ "$USER" = "spw" ]; then
    pgrep mpd || mpd &
fi
firefox &
