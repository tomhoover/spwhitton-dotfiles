# -*- mode: conf-space; -*-

# ---- defaults

Create           Slave
# FastMail always expunges server-side.  mbsync author says this is a
# really bad idea.  Let's just have mbsync expunge client-side.
Expunge          Slave
SyncState        *

# ---- stores

MaildirStore     fmmaildir
Path             ~/.fmail/
Inbox            ~/.fmail/inbox
# Flatten          .

# Trash option doesn't seem to work.  Setting Trash to trash and
# Expunge to Slave makes deleted mail get moved into the trash folder,
# but it is left marked as deleted so it the FastMail IMAP server
# won't add it to the folder, however many times mbsync tries to put
# it there.  So just unbind deletion in mutt for now.

# Trash            trash

IMAPAccount      fastmail
Host             mail.messagingengine.com
User             spwhitton@fastmail.com
PassCmd          "cat ~/local/auth/fmailsyncpass"
UseIMAPS         yes	
RequireSSL       yes
CertificateFile  /etc/ssl/certs/ca-certificates.crt

IMAPStore        fmimap
Account          fastmail
# UseNamespace     no
# PathDelimiter    .

# ---- mailboxes

Channel          fmaili
Master           :fmimap:INBOX
Slave            :fmmaildir:

Channel          fmails
Master           :fmimap:INBOX/"Sent Items"
Slave            :fmmaildir:sent

# when I'm actively using listservs again, this kind of thing should
# allow downloading all of them without the INBOX.Lists prefix:

# Channel fmaill
#   Master :fmimap:INBOX/Lists/
#   Slave :fmmaildir:
#   Patterns * !INBOX

# Channel          fmaila
# Master           :fmimap:INBOX/Archive
# Slave            :fmmaildir:archive

Channel          fmaild
Master           :fmimap:INBOX/Drafts
Slave            :fmmaildir:drafts

# Channel          fmailt
# Master           :fmimap:INBOX/Trash
# Slave            :fmmaildir:trash

# Channel          debian
# Master           :fmimap:INBOX/Lists/Debian
# Slave            :fmmaildir:debian

Channel          feeds
Master           :fmimap:INBOX/Feeds
Slave            :fmmaildir:feeds

# # notes from tablet computer
# Channel          notes
# Master           :fmimap:INBOX/Notes
# Slave            :fmmaildir:notes

Group            fastmail
Channel          fmaili
Channel          fmails
Channel          fmaild
# Channel          fmailt
# Channel          fmaila
# Channel          debian
# Channel          notes
Channel          feeds
