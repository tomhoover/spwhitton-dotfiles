#!/bin/sh

cabal --no-require-sandbox update
for var in "$@"; do
    if [ -d "$HOME/local/src/${var}" ]; then
        echo >&2 "$(basename $0): a version of $var is already installed; skipping"
    else
        mkdir -p $HOME/local/src/${var}
        cd $HOME/local/src/${var}
        touch .duplicity-ignore
        cabal sandbox init
        wget https://www.stackage.org/lts/cabal.config
        cabal install $var --force-reinstalls
        cabal-link-bins
    fi
done
